// src/lib/queryConfig.js
// ðŸš€ Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð°Ñ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ React Query Ð´Ð»Ñ Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸

export const queryConfig = {
  // Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
  defaultOptions: {
    queries: {
      // Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
      staleTime: 5 * 60 * 1000, // 5 Ð¼Ð¸Ð½ÑƒÑ‚ - Ð´Ð°Ð½Ð½Ñ‹Ðµ ÑÑ‡Ð¸Ñ‚Ð°ÑŽÑ‚ÑÑ ÑÐ²ÐµÐ¶Ð¸Ð¼Ð¸
      cacheTime: 10 * 60 * 1000, // 10 Ð¼Ð¸Ð½ÑƒÑ‚ - Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð² Ð¿Ð°Ð¼ÑÑ‚Ð¸
      refetchOnWindowFocus: false, // ÐÐµ Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸ Ñ„Ð¾ÐºÑƒÑÐµ
      refetchOnReconnect: true, // ÐŸÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸ ÑÐµÑ‚Ð¸
      retry: 2, // ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ 2 Ñ€Ð°Ð·Ð° Ð¿Ñ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐµ
      retryDelay: (attemptIndex) => Math.min(1000 * 2 ** attemptIndex, 30000),
    },
  },
  
  // Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð´Ð»Ñ Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ñ‚Ð¸Ð¿Ð¾Ð² Ð´Ð°Ð½Ð½Ñ‹Ñ…
  profiles: {
    staleTime: 15 * 60 * 1000, // 15 Ð¼Ð¸Ð½ÑƒÑ‚ - Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð¸ Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ´ÐºÐ¾
    cacheTime: 30 * 60 * 1000, // 30 Ð¼Ð¸Ð½ÑƒÑ‚ Ð² ÐºÐµÑˆÐµ
  },
  
  trips: {
    staleTime: 2 * 60 * 1000, // 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹ - Ð¿Ð¾ÐµÐ·Ð´ÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑŽÑ‚ÑÑ Ñ‡Ð°Ñ‰Ðµ
    cacheTime: 5 * 60 * 1000, // 5 Ð¼Ð¸Ð½ÑƒÑ‚ Ð² ÐºÐµÑˆÐµ
  },
  
  routes: {
    staleTime: 60 * 60 * 1000, // 1 Ñ‡Ð°Ñ - Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ð¿Ñ€Ð°ÐºÑ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð½Ðµ Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ
    cacheTime: 2 * 60 * 60 * 1000, // 2 Ñ‡Ð°ÑÐ° Ð² ÐºÐµÑˆÐµ
  },
  
  vehicles: {
    staleTime: 10 * 60 * 1000, // 10 Ð¼Ð¸Ð½ÑƒÑ‚ - Ð°Ð²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ð¸ Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ€ÐµÐ´ÐºÐ¾
    cacheTime: 20 * 60 * 1000, // 20 Ð¼Ð¸Ð½ÑƒÑ‚ Ð² ÐºÐµÑˆÐµ
  },
  
  realtime: {
    staleTime: 30 * 1000, // 30 ÑÐµÐºÑƒÐ½Ð´ - Ð´Ð»Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
    cacheTime: 2 * 60 * 1000, // 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹ Ð² ÐºÐµÑˆÐµ
    refetchInterval: 2 * 60 * 1000, // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÑ‚ÑŒ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 2 Ð¼Ð¸Ð½ÑƒÑ‚Ñ‹
  }
};

// Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÐºÐ»ÑŽÑ‡ÐµÐ¹ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²
export const queryKeys = {
  // ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸
  users: ['users'],
  user: (id) => ['users', id],
  profile: ['profile'],
  
  // ÐŸÐ¾ÐµÐ·Ð´ÐºÐ¸
  trips: ['trips'],
  availableTrips: (routeId, date) => ['trips', 'available', { routeId, date }],
  myTrips: ['trips', 'my'],
  trip: (id) => ['trips', id],
  
  // ÐœÐ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹
  routes: ['routes'],
  route: (id) => ['routes', id],
  
  // ÐÐ²Ñ‚Ð¾Ð¼Ð¾Ð±Ð¸Ð»Ð¸
  vehicles: ['vehicles'],
  myVehicles: ['vehicles', 'my'],
  vehicle: (id) => ['vehicles', id],
  
  // Ð‘Ñ€Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
  bookings: ['bookings'],
  myBookings: ['bookings', 'my'],
  booking: (id) => ['bookings', id],
};
